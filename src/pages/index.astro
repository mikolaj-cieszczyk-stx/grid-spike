---
import Layout from '../layouts/Layout.astro';
import {
  Grid,
  type Column,
  type Item,
  type ItemValue,
  type Option,
} from '../components/Grid';

const options: Option[] = [
  { id: 'cat1', label: 'Category 1' },
  { id: 'cat2', label: 'Category 2' },
  { id: 'cat3', label: 'Category 3' },
];

const columns: Column<ItemValue>[] = [
  { id: 'id', label: 'Id', key: 'id', type: 'text', sortable: true },
  { id: 'label', label: 'Label', key: 'label', type: 'text', sortable: true },
  { id: 'type', label: 'Type', key: 'type', type: 'text', sortable: true },
  {
    id: 'defaultWeight',
    label: 'Default Weight',
    key: 'defaultWeight',
    type: 'number',
    sortable: true,
  },
  { id: 'count', label: 'Count', key: 'count', type: 'number', sortable: true },
  {
    id: 'dictionaryNecessity',
    label: 'Dictionary Necessity',
    key: 'dictionaryNecessity',
    type: 'text',
    sortable: true,
  },
  {
    id: 'category',
    label: 'Category',
    key: 'category',
    type: 'select',
    sortable: false,
  },
  {
    id: 'active',
    label: 'Active',
    key: 'active',
    type: 'checkbox',
    sortable: false,
  },
];

const generateItem = (id: number): Item<ItemValue> => ({
  id: id.toString(),
  value: {
    id: id.toString(),
    label: `Item ${id}`,
    type: `Type ${String.fromCharCode(65 + (id % 3))}`,
    defaultWeight: Math.floor(Math.random() * 100) + 1,
    count: Math.floor(Math.random() * 1000) + 1,
    dictionaryNecessity: ['High', 'Medium', 'Low'][id % 3],
    category: options[id % options.length],
    active: id % 2 === 0,
  },
});

const items: Item<ItemValue>[] = Array.from({ length: 100 }, (_, index) =>
  generateItem(index + 1),
);
---

<Layout title="Grid spike">
  <main class="p-8">
    <Grid columns={columns} items={items} client:load />
  </main>
</Layout>
